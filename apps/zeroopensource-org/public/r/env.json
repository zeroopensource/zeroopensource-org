{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "env",
  "description": "Constant exposing environment variables",
  "dependencies": [
    "dotenv",
    "dotenv-expand",
    "zod"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "src/registry/new-york/items/env/env.ts",
      "content": "import path from \"node:path\";\r\nimport { config } from \"dotenv\";\r\nimport { expand } from \"dotenv-expand\";\r\nimport { z } from \"zod\";\r\n\r\nexpand(\r\n  config({\r\n    path: path.resolve(\r\n      process.cwd(),\r\n      // biome-ignore lint/style/noProcessEnv: Intentional\r\n      process.env.NODE_ENV === \"test\" ? \".env.test\" : \".env\"\r\n    ),\r\n  })\r\n);\r\n\r\nconst EnvSchema = z\r\n  .object({\r\n    NODE_ENV: z.enum([\"development\", \"test\", \"staging\", \"production\"]),\r\n    PORT: z.coerce.number(),\r\n    LOG_LEVEL: z.enum([\r\n      \"fatal\",\r\n      \"error\",\r\n      \"warn\",\r\n      \"info\",\r\n      \"debug\",\r\n      \"trace\",\r\n      \"silent\",\r\n    ]),\r\n    DATABASE_URL: z.string(),\r\n    DATABASE_AUTH_TOKEN: z.string().optional(),\r\n    BETTER_AUTH_URL: z.string(),\r\n    BETTER_AUTH_SECRET: z.string(),\r\n  })\r\n  .superRefine((input, ctx) => {\r\n    if (input.NODE_ENV === \"production\" && !input.DATABASE_AUTH_TOKEN) {\r\n      ctx.addIssue({\r\n        code: z.ZodIssueCode.invalid_type,\r\n        expected: \"string\",\r\n        received: \"undefined\",\r\n        path: [\"DATABASE_AUTH_TOKEN\"],\r\n        message: \"Must be set when NODE_ENV is 'production'\",\r\n      });\r\n    }\r\n  });\r\n\r\nexport type env = z.infer<typeof EnvSchema>;\r\n\r\n// biome-ignore lint/style/noProcessEnv: Intentional\r\nconst { data, error } = EnvSchema.safeParse(process.env);\r\n\r\nif (error) {\r\n  // biome-ignore lint/suspicious/noConsole: Intentional\r\n  console.error(\"‚ùå Invalid env:\");\r\n  // biome-ignore lint/suspicious/noConsole: Intentional\r\n  console.error(JSON.stringify(error.flatten().fieldErrors, null, 2));\r\n  process.exit(1);\r\n}\r\n\r\n// biome-ignore lint/style/noNonNullAssertion: Intended\r\nexport const ENV = data!;\r\n",
      "type": "registry:lib"
    }
  ],
  "type": "registry:component"
}